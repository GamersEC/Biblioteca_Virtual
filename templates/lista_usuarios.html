{% extends 'base.html' %}

{% block content %}
<h2>Lista de Usuarios</h2>
<table class="table">
  <thead>
  <tr>
    <th>ID</th>
    <th>Nombre</th>
    <th>Email</th>
    <th>Rol</th>
    <th>Pr√©stamos Activos</th>
    <th>Acciones</th>
  </tr>
  </thead>
  <tbody>
  {% for usuario in usuarios %}
  <tr>
    <td>{{ usuario.id }}</td>
    <td>{{ usuario.nombre }}</td>
    <td>{{ usuario.email }}</td>
    <td>{{ usuario.role }}</td>
    <td>{{ usuario.prestamos | selectattr('esta_activo') | list | count }}</td>
    <td>
      <a href="#" class="btn btn-sm btn-info disabled"><i class="fas fa-edit"></i> Editar (Pendiente)</a>
      <a href="#" class="btn btn-sm btn-danger disabled"><i class="fas fa-trash"></i> Eliminar (Pendiente)</a>
    </td>
  </tr>
  {% else %}
  <tr><td colspan="6">No hay usuarios registrados.</td></tr>
  {% endfor %}
  </tbody>
</table>
<a href="{{ url_for('registrar_usuario') }}" class="btn btn-primary"><i class="fas fa-user-plus"></i> Registrar Nuevo Usuario</a>
{% endblock %}